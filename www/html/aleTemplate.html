<!DOCTYPE html>
<html>
	<head>
		<title>Alessio Alberti</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!--Oswald Font -->
		<link href='http://fonts.googleapis.com/css?family=Oswald:400,300,700' rel='stylesheet' type='text/css'>
		<link href="../css/style.css" rel="stylesheet" media="screen">	
		<link href="../css/responsive.css" rel="stylesheet" media="screen">
		<link href="../css/imp_style.css" rel="stylesheet" />		

	</head>

	<body>
	
		<section id="header_area">
			<div class="wrapper header">
				<div class="clearfix header_top">
					<div class="clearfix logo floatleft">
						<a href=""><h1><span>Alessio Alberti</span> The Blog</h1></a>
					</div>
					<div class="clearfix search floatright">
						<form>
							<input type="text" placeholder="Search"/>
							<input type="submit" />
						</form>
					</div>
				</div>
				<div class="header_bottom">
					<nav>
						<ul id="nav">
							<li><a href="">Home</a></li>
							<li><a href="">Category</a></li>
							<li id="dropdown"><a href="">Archive</a>
								<ul>
									<li><a href="">2015</a></li>
									<li><a href="">2014</a></li>
									<li><a href="">2013</a></li>
								</ul>
							</li>
							<li><a href="">About us</a></li>
							<li><a href="">Contact us</a></li>
						</ul>
					</nav>
				</div>
			</div>
		</section>
		
		<section id="content_area">
			<div class="clearfix wrapper main_content_area">
			
				<div class="clearfix main_content floatleft">
				
					<div class="clearfix">
						<div id="video_num" style="text-align: center;">Playing video</div>
					      <figure id="video_player">
					          <div id="video_container">
					          <video controls poster="http://demosthenes.info/assets/images/vid-glacier.jpg">
					            <source src="http://demosthenes.info/assets/videos/glacier.mp4" type="video/mp4">
					            <source src="http://demosthenes.info/assets/videos/glacier.webm" type="video/webm">
					        </video>
					        </div>
					        <figcaption>
					          <a href="http://demosthenes.info/assets/videos/glacier.mp4" class="currentvid">
					            <img src="http://demosthenes.info/assets/images/vid-glacier.jpg" alt="Athabasca Glacier">
					          </a>
					          <a href="http://demosthenes.info/assets/videos/lake.mp4">
					            <img src="http://demosthenes.info/assets/images/vid-lake.jpg" alt="Athabasca Lake">
					          </a>
					          <a href="http://demosthenes.info/assets/videos/mountain.mp4">
					            <img src="http://demosthenes.info/assets/images/vid-mountain.jpg" alt="Mountain">
					          </a>
					          <a href="http://demosthenes.info/assets/videos/estee.mp4">
					            <img src="http://demosthenes.info/assets/images/estee.jpg" alt="Estee">
					          </a>
					          <a href="http://demosthenes.info/assets/videos/fashion-export.mp4">
					            <img src="http://demosthenes.info/assets/images/gipsy-danger.jpg" alt="Fashion-export">
					          </a>
					          <a href="http://demosthenes.info/assets/videos/glacier.mp4">
					            <img src="http://demosthenes.info/assets/images/vid-glacier.jpg" alt="Glacier">
					          </a>
					          <a href="http://r.myxotod.de/codepen.io/ambilight/sports.mp4">
					            <img src="http://s.cdpn.io/6035/vp_poster.jpg" alt="Prometheus" >
					          </a>
					        </figcaption>
					      </figure>
					</div>
					
					<div class="clearfix content">
						<div class="content_title"><h2>Latest Blog Post</h2></div>
						
						<article class="clearfix single_content">
							<div class="clearfix post_date floatleft">
								<div class="date">
									<h3>27</h3>
									<p>January</p>
								</div>
							</div>
							<div class="clearfix post_detail">
								<h2><a href="">Create a post.</a></h2>
								<div class="clearfix post-meta">
									<p><span><i class="fa fa-user"></i> Admin</span> <span><i class="fa fa-clock-o"></i> 20 Jan 2014</span> <span><i class="fa fa-comment"></i> 4 comments</span> <span><i class="fa fa-folder"></i> Category</span></p>
								</div>
								<div class="clearfix post_excerpt">
									<form>
								      <div>
								          <label>Name</label>
								          <input type="text" class="form-control" name="name" placeholder="Enter name">
								      </div>
								      <div>
								          <label>Last Name</label>
								          <input type="text" class="form-control" name="last_name" placeholder="Enter name">
								      </div>
								      <div>
								          <label>Email</label>
								          <input type="email" class="form-control" name="email" placeholder="Enter email">
								      </div>
								      <div>
								          <label>Phone number</label>
								          <input type="text" class="form-control" name="phone" placeholder="Enter phone number">
								      </div>
								      <div>
								          <input type="submit" value="Submit"/>
								      </div>  
								    </form>   
								</div>
								<a href="">Continue Reading</a>
							</div>
						</article>
						
						<article class="clearfix single_content">
							<div class="clearfix post_date floatleft">
								<h3>27</h3>
								<p>January</p>
							</div>
							<div class="clearfix post_detail">
								<h2><a href="">Let's try to be geolocalized.</a></h2>
								<div class="clearfix post-meta">
									<p><span>Admin</span> <span>20 Jan 2014</span> <span>4 comments</span> <span>Category</span></p>
								</div>
								<div class="clearfix post_excerpt">
									<p>We will be trying to display a map with current location. Follow the
								      instructions to display the map  : <br/>
								      </p>
								        <form id="geolocation-form" method="post" action="#" onSubmit = "return false">

								          <input type="button" id="init-map" value="Show my location!"/>
								          <div id="google-map">Please click on the button to display the map</div>

								          <p>Now, you can also enter a specific location, and display it on the map : </p>
								          <label>Street</label>
								          <input type="text" id="street">
								          <label>City</label>
								          <input type="text" id="city">
								          <label>Zip Code</label>
								          <input type="text" id="zip">
								          <label>Country</label>
								          <input type="text" id="country">
								          <input type="button" id="update-map" value="Update the map"/>

								        </form>
								</div>
								<a href="">Continue Reading</a>
							</div>
						</article>
						
						<article class="clearfix single_content">
							<div class="clearfix post_date floatleft">
								<h3>27</h3>
								<p>January</p>
							</div>
							<div class="clearfix post_detail">
								<h2><a href="">Let's watch a video.</a></h2>
								<div class="clearfix post-meta">
									<p><span>Admin</span> <span>20 Jan 2014</span> <span>4 comments</span> <span>Category</span></p>
								</div>
								<div class="clearfix post_excerpt">
								 <form id="video-form" method="post" action="#" onSubmit = "return false">
						          <p> Load a new video: <br>
						            <video class='video1' id="prev" controls='controls'>
						            <source src="http://r.myxotod.de/codepen.io/ambilight/sports.mp4" type="video/mp4">
						          </video> </p>
						          <p><canvas id="canvas" 
						            style="display:block;">
						          </canvas></p>
						          <label>URL</label>
						          <input type="text" id="URL_video" value="https://ia601900.us.archive.org/11/items/electricsheep-flock-244-80000-3/00244=80013=77374=79895.mp4" onkeypress="if(event.keyCode == 13) document.getElementById('load').click();" />
						          <input type="button" id="load" value="Load"/> 
						          <input type="button" id="preview" value="Preview"/>
						          <div class="bubbleFrame">
						            <div class="ball bubble">
						              <video class="videoBubble" poster="http://demosthenes.info/assets/images/vid-glacier.jpg" autoplay loop>
						                <source src="http://demosthenes.info/assets/videos/glacier.mp4" type="video/mp4">
						                <source src="http://demosthenes.info/assets/videos/glacier.webm" type="video/webm">
						              </video>
						            </div>
						          </div>
						          <div class='stage'>
						            <video poster="http://demosthenes.info/assets/images/vid-lake.jpg" id='video1' controls='controls' class='video0'>
						              <source src="http://media.w3.org/2010/05/sintel/trailer.mp4" type="video/mp4" />
						              <source src="http://media.w3.org/2010/05/sintel/trailer.webm" type="video/webm" />
						              <source src="http://media.w3.org/2010/05/sintel/trailer.ogv" type="video/ogg" />
						            </video>
						          </div>
						          <p>Options: <br>
						            <label>Seek: </label>
						            <input type="text" id="seek" value="0" onkeypress="if(event.keyCode == 13) document.getElementById('seekBtn').click();" /> 
						            <input type="button" id="seekBtn" value="Seek"/> <br>
						            <label>Rotate: </label>
						            <input type="text" id="rotateText" value="0" onkeypress="if(event.keyCode == 13) document.getElementById('rotate').click();"/>
						            <input type="button" id="rotate" value="Rotate"/> <br> 
						            <input type="checkbox" id="controlBar" checked onChange="showControlBar()"/>Show defaults control <br>
						            <input type="button" id="mirrH" value="Mirror Horizontally"/>  
						            <input type="button" id="mirrV" value="Mirror Vertically"/> 
						            </p>
						          </form>
								</div>
								<a href="">Continue Reading</a>
							</div>
						</article>						
					</div>
				</div>
				<aside class="clearfix sidebar_container floatright">
					<div class="clearfix newsletter">
						<form>
							<h2>Signup for newsletter</h2>
							<input type="text" placeholder="Name" id="mce-TEXT"/>
							<input type="email" placeholder="Name" id="mce-EMAIL"/>
							<input type="submit" value="Submit" id="mc-embedded-subscribe"/>
						</form>
					</div>
					<div class="clearfix sidebar">
						<div class="clearfix single_sidebar">
							<div class="popular_post">
								<div class="sidebar_title"><h2>Most Popular</h2></div>
								<ul>
									<li><a href="">Let's try to be geolocalized. </a></li>
									<li><a href="">Create a post. </a></li>
									<li><a href="">Play a video. </a></li>
								</ul>
							</div>
							</div>
						<div class="clearfix single_sidebar">
							<h2>Recent Post</h2>
							<ul>
								<li><a href="">Category Name <span>(12)</span></a></li>
								<li><a href="">Category Name <span>(12)</span></a></li>
								<li><a href="">Category Name <span>(12)</span></a></li>
								<li><a href="">Category Name <span>(12)</span></a></li>
								<li><a href="">Category Name <span>(12)</span></a></li>
							</ul>
						</div>
					</div>
				</aside>
			</div>
		</section>
		<footer>
		<section id="footer_top_area">
			<div class="clearfix wrapper footer_top">
				<div class="clearfix footer_top_container">
					<div class="clearfix single_footer_top floatleft">
						<h2>From Twitter</h2>
						<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. <a href="">Lorem Ipsum has been the industry</a> standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
					</div>
					<div class="clearfix single_footer_top floatleft">
						<h2>Recent Post</h2>
						<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy <a href="">Lorem Ipsum has been the industry</a> text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
					</div>
					<div class="clearfix single_footer_top floatleft">
						<h2>Useful Links</h2>
						<ul>
							<li><a href="">Partner 1</a></li>
							<li><a href="">Partner 2</a></li>
							<li><a href="">Partner 3</a></li>
							<li><a href="">Partner 4</a></li>
							<li><a href="">Partner 5</a></li>
							<li><a href="">Partner 6</a></li>
						</ul>
					</div>
				</div>
			</div>
		</section>
		
		<section id="footer_bottom_area">
			<div class="clearfix wrapper footer_bottom">
				<div class="clearfix copyright floatleft">
					<p> Copyright &copy; All rights reserved.</p>
				</div>
			</div>
		</section>
		</footer>

		<script type="text/javascript" src="js/navToComboBox.js"></script>
		<script type="text/javascript">
			selectnav('nav', {
			  label: '-Navigation-',
			  nested: true,
			  indent: '-'
			});
		</script>	
	 	<script type="text/javascript"
      src="http://maps.google.com/maps/api/js?sensor=false"></script>

    <script>
      
      /**************************
      //Script for the google map
      **************************/
      
      var map = null;
      var geocoder = null;
      var googleMap = document.getElementById('google-map');

      function showPosition(position) {
        //Fonction to be passed to the browser's geolocation function
            var latLng = new google.maps.LatLng(
                position.coords.latitude, position.coords.longitude);          
            geocoder.geocode({'location': latLng}, function(results, status) {
            if (status === google.maps.GeocoderStatus.OK) {
              if (results[0]) {
                 var marker = new google.maps.Marker({
                  position: latLng,
                  map: map
                });
                map.setCenter(latLng);
                map.setZoom(16);
                document.getElementById("street").value = results[0].address_components[0].long_name + " " + results[0].address_components[1].long_name;
                document.getElementById("city").value = results[0].address_components[2].long_name;
                document.getElementById("country").value = results[0].address_components[5].long_name;
                document.getElementById("zip").value = results[0].address_components[6].long_name;
              } else {
                window.alert('No results found');
              }
            } else {
              window.alert('Geocoder failed due to: ' + status);
            }
            });
        }

          function showMap() {
            //This creates the initial map, or update it
            if (!map) {
              map = new google.maps.Map(googleMap, {
                zoom: 3,
                center: new google.maps.LatLng(37.4419, -94.1419)
              });
            }
            if(!geocoder){
              geocoder = new google.maps.Geocoder();
            }

            if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(showPosition);
            }
          }

          function updateMap(){
            var newLocation = document.getElementById("street").value + ", " + document.getElementById("zip").value + " " + document.getElementById("city").value + ", " + document.getElementById("country").value;
            geocoder.geocode( { 'address': newLocation}, function(results, status) {
              if (status == google.maps.GeocoderStatus.OK) {
                map.setCenter(results[0].geometry.location, 8);
                var marker = new google.maps.Marker({
                  map: map, 
                  position: results[0].geometry.location
                });
              } else {
                alert("Error: " + status);
              }
            });
          }
          
          // Geolocalization
          //Clicking on the "Show the map" will trigger the showMap() function
          document.getElementById('init-map').addEventListener('click',showMap, true);
          //Clicking on the update button will...update (the map)
          document.getElementById('update-map').addEventListener('click',updateMap, true);
          //For some reason, this doesn't work as expected : 
          //pressing "enter" when focused on the location field should return false...but I had to hard-code it in the HTML
          document.getElementById('geolocation-form').addEventListener('submit',function(){return false;},true);

          /**************************
          //Script for video player
          **************************/
          var rotation = 0;

          function rotate(){
            var v = document.getElementById('video1');
            var properties = ['transform', 'WebkitTransform', 'MozTransform','msTransform', 'OTransform'];
            var prop = properties[0];
            var i,j;
            for(var i=0,j=properties.length;i<j;i++){
              if(typeof v.style[properties[i]] !== 'undefined'){
                prop = properties[i];
                break;
              }
            }
            rotation = rotation + parseInt(document.getElementById('rotateText').value);
            v.style[prop]='rotate('+rotation+'deg)';
          }

          function mySeek(){
            document.getElementById("video1").currentTime = parseInt(document.getElementById("seek").value);
          }

          function showControlBar(){  
            var video = document.getElementById('video1');
            var check = document.getElementById('controlBar');
            if(check.checked){
                video.setAttribute("controls","controls");
            } else {
                video.removeAttribute("controls");
            }
          }
          
          function loadVideo(){
            var video = document.getElementById("video1"),
            source = video.getElementsByTagName("source");
            source[0].src = document.getElementById("URL_video").value;
            video.load();
            video.play();
          }
          var scaleX = 1;
          var scaleY = 1;
          function flipH(){
            var video = document.getElementById('video1');
            video.style.webkitTransform = "scale(" + (-scaleX) + ", " + scaleY + ")";
            video.style.transform = "scale(" + (-scaleX) + ", " + scaleY + ")";
            scaleX = -scaleX;
          }

          function flipV(){
            var video = document.getElementById('video1');
            video.style.webkitTransform = "scale(" + scaleX + ", " + (-scaleY) + ")";
            video.style.transform = "scale(" + scaleX + ", " + (-scaleY) + ")";
            scaleY = -scaleY;
          }
          
          var videoPrev = document.getElementById("prev");
          var canvas = document.getElementById("canvas");
          var ctx = canvas.getContext("2d");
          var ssContainer = document.getElementById("screenShots");
          var videoHeight, videoWidth;
          videoPrev.style.display = 'none';
          canvas.style.display = 'none';
          function preview(){
              videoPrev.style.display = 'block';
              canvas.style.display = 'block';
              var sources = videoPrev.getElementsByTagName('source');
              sources[0].src = document.getElementById("URL_video").value;
              videoPrev.load();
              videoPrev.play();
              videoPrev.addEventListener("loadedmetadata", selectFrameVideo);
              videoPrev.addEventListener("playing", initScreenshot);
          }
          
          function selectFrameVideo(){
              videoPrev.currentTime = Math.round((videoPrev.duration)/2);
          }

          function prevFinished(e) {
              document.getElementById('prev').style.display = 'none';
          }

          function initScreenshot() {
            videoPrev.removeEventListener("playing", initScreenshot);
            videoHeight = videoPrev.clientHeight; 
            videoWidth = videoPrev.clientWidth;
            canvas.width = videoWidth;
            canvas.height = videoHeight;
            grabScreenshot();
          }

          function grabScreenshot() {
            ctx.drawImage(videoPrev, 0, 0, videoWidth, videoHeight);
            videoPrev.style.display = 'none';
          }

          //Video Player
          document.getElementById('mirrV').addEventListener('click',flipV, true);
          document.getElementById('mirrH').addEventListener('click',flipH, true);
          document.getElementById('rotate').addEventListener('click',rotate, true);
          document.getElementById('seekBtn').addEventListener('click',mySeek, true);
          document.getElementById('load').addEventListener('click',loadVideo, true);
          document.getElementById('preview').addEventListener('click',preview, true);

          //JukeBox
          var video_player = document.getElementById("video_player");
          video = video_player.getElementsByTagName("video")[0],
          video_links = video_player.getElementsByTagName("figcaption")[0],
          source = video.getElementsByTagName("source"),
          link_list = [],
          currentVid = 0,
          allLnks = video_links.children,
          lnkNum = allLnks.length;
          video.removeAttribute("controls");
          video.removeAttribute("poster");
          document.getElementById("video_num").innerHTML = "Playing video " + 1 + "/" + lnkNum;

          (function() {
          function playVid(index) {
           video_links.children[index].classList.add("currentvid");
            var filename = link_list[index].replace(/\.[^.]*$/,"");
            source[1].src = filename + ".webm";  
            source[0].src = filename + ".mp4";
              currentVid = index;
              video.load();
            video.play();
            document.getElementById("video_num").innerHTML = "Playing video " + (index+1) + "/" + lnkNum;
          }

          for (var i=0; i<lnkNum; i++) {
          link_list[i] = allLnks[i].href;
          (function(index){
                  allLnks[i].onclick = function(i){
                  i.preventDefault();  
              for (var i=0; i<lnkNum; i++) {
              allLnks[i].classList.remove("currentvid");
              }
              playVid(index);
                  }    
              })(i);
          }
          video.addEventListener('ended', function () {
              allLnks[currentVid].classList.remove("currentvid");
              if ((currentVid + 1) >= lnkNum) { nextVid = 0 } else { nextVid = currentVid+1 }
              playVid(nextVid);
          })

          video.addEventListener('mouseenter', function() {
              video.setAttribute("controls","true");
          })

          video.addEventListener('mouseleave', function() {
              video.removeAttribute("controls");
          })

          var indexOf = function(needle) {
              if(typeof Array.prototype.indexOf === 'function') {
                  indexOf = Array.prototype.indexOf;
              } else {
                  indexOf = function(needle) {
                      var i = -1, index = -1;
                for(i = 0; i < this.length; i++) {
                          if(this[i] === needle) {
                              index = i;
                              break;
                          }}
                      return index;
                  };}
              return indexOf.call(this, needle);
          };
            var focusedLink = document.activeElement;
            index = indexOf.call(allLnks, focusedLink);
          })();  
    </script>
	</body>
</html>
